/* General Body Styles */
body {
    font-family: 'Inter', sans-serif; /* Sets the primary font for the entire page */
    background-color: #e0e0e0; /* Light grey background */
    color: #333; /* Dark grey text color */
    margin: 0; /* Removes default body margin */
    padding: 20px; /* Adds padding around the entire page content */
    display: flex; /* Uses flexbox for layout */
    flex-direction: column; /* Arranges children (title, main wrapper) vertically */
    align-items: center; /* Centers items horizontally within the body */
    min-height: 100vh; /* Ensures the body takes at least the full viewport height */
}

/* Main Application Title */
.title {
    font-size: 2.5em; /* Large font size for the main title */
    font-weight: bold; /* Bold text */
    color: #2c3e50; /* Dark blue-grey color */
    margin-bottom: 30px; /* Space below the title */
    text-align: center; /* Centers the text */
}

/* Wrapper for the Motor Control and VNA Measurement panels */
.main-content-wrapper {
    display: flex; /* Uses flexbox to arrange child panels */
    flex-direction: row;
    justify-content: center; /* Centers panels horizontally */
    gap: 40px; /* Space between the two main panels (Motor Control and VNA) */
    align-items: flex-start; /* Align items to the top */
    width: 100%; /* Make the wrapper take full width */
    max-width: 1200px; /* Optional: Set a max-width for very large screens to prevent panels from becoming too wide */
}

/* Wrapper for the left column (Motor Control and Results Panel) */
.left-column-wrapper {
    display: flex;
    flex-direction: column;
    gap: 40px; /* Space between Motor Control and Results Panel */
    flex: 1 1 calc(50% - 20px); /* Take up half the space, similar to other panels */
}

/* Styles for the Motor Control Panel */
.grid-container {
    display: grid; /* Uses CSS Grid for precise layout */
    grid-template-columns: auto 1fr auto; /* Defines three columns: auto-width, flexible, auto-width */
    gap: 15px 10px; /* Vertical and horizontal gap between grid items */
    padding: 20px; /* Padding inside the grid container */
    background-color: #f9f9f9; /* Light background for the panel */
    border-radius: 12px; /* Rounded corners */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Soft shadow */
    flex: 1 1 calc(50% - 20px); /* Ensures panels are side-by-side and equal width, accounting for gap */
    /* Removed min-width to allow more flexibility */
}

/* Make the h2 inside grid-container span all columns */
.grid-container h2 {
    grid-column: 1 / -1; /* This makes the element span from the first to the last column line */
    text-align: center;
    color: #2c3e50;
    margin: 0 0 10px 0; /* Adjust margin */
}

/* Styling for grid headers */
.grid-item.header {
    font-weight: bold; /* Bold text for headers */
    background-color: #ecf0f1; /* Light grey background for headers */
    padding: 8px 10px; /* Padding inside headers */
    border-radius: 5px; /* Rounded corners for headers */
    text-align: center; /* Center-align text in headers */
}

/* Styling for general grid items */
.grid-item {
    padding: 8px 0; /* Padding for regular grid items */
    display: flex; /* Use flexbox for vertical alignment */
    align-items: center; /* Center items vertically */
    justify-content: center; /* Center items horizontally */
    font-size: 1.0em; /* Font size */
    color: #34495e; /* Darker text color */
}

/* Input field specific styling */
.grid-item input[type="number"] {
    width: 80%; /* Occupy 80% of the grid cell width */
    padding: 8px 10px; /* Padding inside input */
    border: 1px solid #bdc3c7; /* Light grey border */
    border-radius: 5px; /* Rounded corners */
    text-align: center; /* Center text input */
    font-size: 1em; /* Font size */
    transition: border-color 0.3s ease; /* Smooth transition for border color */
}

.grid-item input[type="number"]:focus {
    border-color: #3498db; /* Blue border on focus */
    outline: none; /* Remove default outline */
}

/* Button styling */
button {
    background-color: #3498db; /* Blue background */
    color: white; /* White text */
    padding: 10px 20px; /* Padding inside button */
    border: none; /* No border */
    border-radius: 8px; /* Rounded corners */
    cursor: pointer; /* Pointer cursor on hover */
    font-size: 1.1em; /* Larger font size */
    transition: background-color 0.3s ease, transform 0.2s ease; /* Smooth transitions */
}

button:hover {
    background-color: #2980b9; /* Darker blue on hover */
    transform: translateY(-2px); /* Slight lift effect */
}

button:active {
    background-color: #1a659e; /* Even darker blue on active */
    transform: translateY(0); /* Reset lift effect */
}

/* Styles for the VNA Impedance Measurement Panel */
.vna-container {
    display: flex; /* Uses flexbox for internal layout */
    flex-direction: column; /* Arranges children vertically */
    align-items: center; /* Centers children horizontally */
    gap: 20px; /* Space between internal elements */
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    flex: 1 1 calc(50% - 20px); /* Ensures panels are side-by-side and equal width, accounting for gap */
    /* Removed min-width to allow more flexibility */
}

.vna-container h2 {
    color: #2c3e50; /* Dark blue-grey for VNA title */
    margin-bottom: 10px;
}

.vna-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%; /* Take full width for alignment */
    justify-content: center; /* Center controls */
    flex-wrap: wrap; /* Allow wrapping on small screens */
}

.vna-controls label {
    font-weight: bold;
    color: #555;
    white-space: nowrap; /* Prevent label from breaking */
}

.vna-controls input[type="number"] {
    padding: 8px 10px;
    border: 1px solid #bdc3c7;
    border-radius: 5px;
    font-size: 1em;
    width: 100px; /* Fixed width for frequency input */
    text-align: center;
}

.vna-display {
    text-align: center;
    margin-top: 10px;
}

.vna-display p {
    font-size: 1.1em;
    margin: 5px 0;
    color: #34495e;
}

.vna-display span {
    font-weight: bold;
    color: #e67e22; /* Orange color for values */
}

/* Container for the Smith Chart */
.smith-chart-container {
    text-align: center; /* Centers content within the container */
    margin-top: 20px; /* Space above the container */
    width: 100%; /* Takes full width */
}

/* Title for the Smith Chart section */
.smith-chart-container h3 {
    color: #2c3e50; /* Dark blue-grey color */
    margin-bottom: 10px; /* Space below the title */
}

/* Styles for the Smith Chart canvas */
#smith-chart-canvas {
    border: 2px solid #3498db; /* Blue border */
    background-color: #f8f8f8; /* Light background */
    border-radius: 10px; /* Rounded corners */
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1); /* Inner shadow */
    max-width: 100%; /* Ensures canvas is responsive and doesn't overflow */
    height: auto; /* Maintains aspect ratio */

    background-image: url('smithBG.png'); /* Using the local smithBG.png file */
    background-size: cover; /* Covers the entire canvas area */
    background-position: center; /* Centers the background image */
    background-repeat: no-repeat; /* Prevents the image from repeating */
}

/* Note below the Smith Chart */
.chart-note {
    font-size: 0.9em; /* Smaller font size */
    color: #7f8c8d; /* Grey color */
    margin-top: 10px; /* Space above the note */
}

/* NEW: Add margin to the export button for separation */
#btn-export-impedance {
    margin-top: 15px; /* Adds space above the export button */
    background-color: #f39c12; /* Example: orange color */
}

#btn-export-impedance:hover {
    background-color: #e67e22; /* Darker orange on hover */
}

/* Styles for the custom message box */
.message-box {
    /* These styles are also dynamically added by JS, but good to have here for reference */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #f4f4f4;
    border: 1px solid #ccc;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    text-align: center;
    max-width: 300px;
    max-height: 90vh;
    overflow: scroll;
}
.message-box.error {
    background-color: #ffe0e0;
    border-color: #e00;
}
.message-box p {
    margin-bottom: 15px;
    font-size: 1.1em;
}
.message-box .close-btn {
    background-color: #3498db;
    color: white;
    padding: 8px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
.message-box .close-btn:hover {
    background-color: #2980b9;
}

/* Styles for the Results Panel */
.results-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.results-container h2 {
    color: #2c3e50;
    margin-bottom: 10px;
}

/* Styles for the new impedance results table */
.results-table-wrapper {
    width: 100%;
    max-height: 250px; /* Fixed height for scrollable area */
    overflow-y: auto; /* Enable vertical scrolling */
    border: 1px solid #bdc3c7;
    border-radius: 8px;
    background-color: #ecf0f1;
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);
}

#impedance-results-table {
    width: 100%;
    border-collapse: collapse; /* Collapse borders between cells */
    font-size: 0.95em;
    color: #34495e;
}

#impedance-results-table th,
#impedance-results-table td {
    padding: 10px;
    text-align: center;
    border-bottom: 1px solid #dcdcdc; /* Light border for rows */
}

#impedance-results-table th {
    background-color: #3498db;
    color: white;
    font-weight: bold;
    position: sticky; /* Make header sticky for scrolling */
    top: 0; /* Stick to the top of the scrollable container */
    z-index: 1; /* Ensure header is above scrolling content */
}

#impedance-results-table tbody tr:nth-child(even) {
    background-color: #f2f2f2; /* Zebra striping for readability */
}

#impedance-results-table tbody tr:hover {
    background-color: #e8f4f8; /* Highlight row on hover */
}

/* Small circle for color display in table */
.color-dot {
    display: inline-block;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 1px solid #555;
    vertical-align: middle;
}


.results-controls {
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 100%;
    align-items: center;
}

.color-picker-section, .export-section {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    justify-content: center;
    flex-wrap: wrap; /* Allow wrapping on smaller screens */
}

.color-picker-section label, .export-section label {
    font-weight: bold;
    color: #555;
}

#dataset-color-select {
    padding: 8px 10px;
    border: 1px solid #bdc3c7;
    border-radius: 5px;
    font-size: 1em;
    cursor: pointer;
    background-color: white;
}

#export-filename-input {
    padding: 8px 10px;
    border: 1px solid #bdc3c7;
    border-radius: 5px;
    font-size: 1em;
    width: 180px; /* Adjust width as needed */
}

#btn-export-custom-impedance {
    background-color: #27ae60; /* Green for export */
}

#btn-export-custom-impedance:hover {
    background-color: #229a55; /* Darker green on hover */
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .main-content-wrapper {
        flex-direction: column; /* Stack panels vertically on small screens */
        gap: 20px; /* Reduce gap */
    }

    .left-column-wrapper {
        flex: none; /* Remove flex sizing */
        width: 100%; /* Take full width */
    }

    .vna-controls, .color-picker-section, .export-section {
        flex-direction: column;
        align-items: center;
    }
}
